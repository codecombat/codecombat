block content
  body(style="background-image: url(/images/pages/maintaince/background.jpg); background-size: 100vw; display: flex; flex-direction: column; align-items: center;", onload="onLoad()")
    img(id='logo', src="/images/pages/base/logo.png")
    h3(id='title', style="margin-top: 20vh;font-size:48px;color: #317EAC")
    span(id='msg', style="margin-top: 30vh;font-size:24px;")

block script-start
  script(src='/maintaince_time')
  script.
    function onLoad() {
      // mmaintaince hours comes from /maintaince_time
      // and it comes from database.mandate collelction
      // 0 or undefined for not in maintaince
      // numbers for expected maintaince hours
      // other value for forever maintaince (cannot determine duration)
      time = maintainceHours
      duration = null
      if(!isNaN(+time))
        duration = +time
      if(chinaUx){
        document.querySelector('#logo').src = '/images/pages/base/logo-cn.png'
        maintainceTitle = '网站升级维护中...'
        maintainceMsg = '感谢您的耐心等待'
        if(duration) {
          maintainceMsg = '预计耗时 ' + duration + ' 小时，' + maintainceMsg
        }
      }
      else{
        maintainceTitle = 'Website Maintaince In Progress'
        maintainceMsg = 'Thanks for your patience'
        if(duration){
          maintainceMsg = 'It may take up to ' + duration + ' hours. '  + maintainceMsg
        }
      }
      document.querySelector('#title').innerHTML = maintainceTitle
      document.querySelector('#msg').innerHTML = maintainceMsg
    }
