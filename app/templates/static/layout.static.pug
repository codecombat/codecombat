doctype html
block begin
html(lang='en')
  head
    meta(charset='utf-8')
    meta(name='viewport', content='width=1024', data-vue-meta="true", data-vmid="viewport")
    meta(http-equiv='Accept-CH', content='Viewport-Width')
    title(data-i18n="new_home.title")
    meta(name="keywords", data-i18n="[content]new_home.meta_keywords")
    meta(name="description", data-i18n="[content]new_home.meta_description")
    meta(property='og:title', data-i18n="[content]new_home.title")
    meta(property='og:description', data-i18n="[content]new_home.meta_description")
    meta(property='og:url', data-i18n="[content]new_home.meta_og_url")
    meta(property='og:type', content='game')
    meta(property='og:image', content='https://codecombat.com/images/pages/home/play_img.png')
    meta(property='og:image:alt', content='CodeCombat')
    meta(property='og:site_name', content='CodeCombat')
    meta(name='twitter:card', content='summary')
    meta(name='twitter:title', content='CodeCombat: Learn to Code by Playing a Game')
    meta(name='twitter:url', content='https://codecombat.com')
    meta(name='twitter:site', content='CodeCombat')
    meta(name='twitter:image:src', content='http://codecombat.com/images/pages/base/logo_square_250.png')
    meta(name='twitter:description', content='Learn programming with a multiplayer live coding strategy game for beginners. Learn Python or JavaScript as you defeat ogres, solve mazes, and level up. Open source HTML5 game!')
    meta(name="p:domain_verify", content="f5afcb2c36bb8b1cbd70c44b65e5ec75")
    meta(name='fb:app_id', content='148832601965463')
    link(rel="apple-touch-icon" sizes="180x180" href="/images/favicon/apple-touch-icon.png")
    link(rel="icon" type="image/png" sizes="32x32" href="/images/favicon/favicon-32x32.png")
    link(rel="icon" type="image/png" sizes="16x16" href="/images/favicon/favicon-16x16.png")
    link(rel="mask-icon" href="/images/favicon/safari-pinned-tab.svg" color="#5bbad5")
    link(rel="shortcut icon" href="/images/favicon/favicon.ico")
    meta(name="msapplication-TileColor" content="#da532c")
    meta(name="msapplication-config" content="/images/favicon/browserconfig.xml")
    link(rel='manifest', href='/pwa/manifest.json')
    link(rel='stylesheet', href='/' + shaTag + '/stylesheets/app.css')
    if me.useDexecure()
      script.
        var DEXECURE_URL = "/dexecure-c167a5675c.js";
        "serviceWorker"in navigator&&navigator.serviceWorker.register(DEXECURE_URL,{scope:'/'}).then(function(e){"/"!=new URL(e.scope).pathname&&console.log("Service worker scope is not /")})["catch"](function(e){console.log("Unable to register service worker.");console.log(e)});
    script.
      window.javascriptsPath = '/#{shaTag}/javascripts/';
    if chunkPaths[viewName]
      script(src=chunkPaths[viewName], defer='')
    script(src='/' + shaTag + '/javascripts/app.js', defer='', async='', data-ace-base='/javascripts/ace') // This data tag needs to be on SOME script with a src for Ace to work
    script(src='/user-data?sha=' + shaTag)
    if me.useGoogleAnalytics()
      // Google Analytics
      script.
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-39724129-1', 'auto');

      // Global site tag (gtag.js) - Google Ads: 811324643
      script(async src="https://www.googletagmanager.com/gtag/js?id=AW-811324643")
      script.
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'AW-811324643');
      // Google Optimize
      style.
        .async-hide {
          opacity: 0 !important;
        }
      script.
        (function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;})(window,document.documentElement,'async-hide','dataLayer',4000,{'OPT-K2B6W8Q':true});
    else
      // Baidu Analytics
      script.
        console.log('use baidu analytics')
        var _hmt = _hmt || [];
        (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ffc38c02cf8f484ab8f785b58dfa8b6e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
        })();

    if me.useStripe()
      script(src='https://checkout.stripe.com/checkout.js')

    // Webpack-inserted CSS:
    //- (will be inserted at runtime)

    block setup
    block script-start
      script.
        //- This runs for pages without specific static templates
        //- Those pages with static templates run this themselves (in mock.static.pug),
        //-   after setting window.alreadyLoadedView
        function onLoad() {
          try {
              // IE10 warning
              var htmlElement = document.querySelector("html");
              if (htmlElement) {
                  if ($.browser.msie && $.browser.edge != true) {
                    if ((window.location.pathname || "").indexOf("web-dev-level") < 0) {
                      alert("CodeCombat does not support Internet Explorer, but runs on all other major browsers.");
                      }
                  }
              }
              // IE8 can't handle this
              FastClick.attach(document.body);
          } catch (error) { }
        }
  body.clearfix(onload='onLoad();')
    #fb-root
    block content
    #modal-wrapper.modal-content.hide

  if me.useQiyukf()
    script.
      (function (w, d, n, a, j) {
        w[n] = w[n] || function () {
          (w[n].a = w[n].a || []).push(arguments);
        };
        j = d.createElement('script');
        j.async = true;
        j.src = 'https://qiyukf.com/script/417b0e66819a980076108e0dac606b50.js';
        d.body.appendChild(j);
      })(window, document, 'ysf');
