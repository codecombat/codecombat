##### 课程计划

# 游戏开发1课程指南

  - 建议先修：计算机科学导论
  - 5 x 45 – 60分钟代码编写课

欢迎来到游戏开发1课程！

游戏开发1中，学生将通过课堂讨论学习游戏思想和游戏设计。他们将会把这些知识用到CodeCombat游戏开发关卡中，他们需要用特定的命令来创建游戏。最后，学生们需要完成一个最终项目，设计并创建出他们自己独特的游戏，并从同学那里获得反馈意见。

### 前提要求

  - 教师必须先购买[<span class="underline">入门或完全许可</span>](https://codecombat.com/teachers/licenses)，才能分配游戏开发1课程。
  - 学生需要先完成计算机科学导论的学习。

### 设置

1.  导航到课程页面

2.  选择要分配游戏开发1课程的学生

3.  从“选择课程”下拉菜单中选择游戏开发1，然后点“分配课程”

4.  学生将从自己的控制面板中看到游戏开发1课程

### 课程概述

游戏开发1课程期间，学生将学会使用元素、机制和目标(PIECES, MECHANICS, GOALS)来创建自己的游戏。

  - 第1-3天：学习游戏设计的基本概念，以及在CodeCombat中创建游戏所需的命令
  - 第4天：开发和实现自己的游戏！
  - 第5天：展示说明 – 与全班同学分享自己的游戏

### 游戏开发词汇参考

  - **目标：**游戏玩家要想在游戏中取胜（或是取得进展）必须达成的目标。
  - **机制：**决定玩家与游戏之间如何进行交互的规则。
      - *例如，超级玛丽中的一个机制是，玩家按键就能让超级玛丽跳跃。*
  - **元素：**组成游戏的特定元素。
  - **玩家：**玩游戏的人，及其控制的游戏元素（译者注：为示区别，玩游戏的人将翻译为玩家，玩家控制的游戏对象将翻译为玩家角色或根据上下文直接不译）。
  - **可生成元素：**学生可以在游戏中“生成”的一类游戏元素。
  - **学生：**创建游戏的人。

## 第1天

### 课程引入

**讨论问题\#0a：你玩游戏吗？你最喜欢的游戏是什么？**

可以是桌面游戏、电子游戏、体育运动。游戏的形式多种多样！

**讨论问题\#0b：游戏是什么？**

游戏拥有：

  - **目标**
  - **机制**（也叫规则）
  - **元素**（骰子、卡牌、数字资源、体育器材）
  - **乐趣**（或是挑战！）

#### 游戏开发关卡

游戏开发关卡与计算机科学关卡有一些重要的不同：

  - 学生将使用**game** （游戏），而非**hero**（英雄）。
      - 例如：`game.spawnXY("gem", 20, 34)`
      - "Test"测试按钮将取代"Run"运行按钮
      - 每一关引入新机制、元素或目标，这些都是学生在最终项目中需要的

### 关卡1：花园墙上

**讨论问题\#1a：游戏“元素”是什么意思？**

  - 游戏有很多元素，例如桌面游戏中的骰子、代币、卡牌，再例如电子游戏中的虚拟元素：关卡、武器、升级、敌人。

**讨论问题\#1b：你最喜欢的游戏中有哪些元素？**

  - 我们提供一系列可加入到游戏的*可生成*元素给学生。
  - 玩家控制的游戏元素我也会用Player（玩家角色）来称呼。

#### 关卡游玩

本关引入`game.spawnXY(type, x, y)`命令。

  - 该命令在关卡中的特定位置创建或者说生成("spawns")一个新元素。
  - type是表示生成元素类型的*字符串*。本关中，学生将生成一个围栏"fence"。
  - x和y是数字，用来表示元素出现的水平和竖直坐标。
  - 记得：
      - x从0开始，从左到右越来越大
      - y从0开始，从下到上越来越大
  - 后续关卡将会引入更多可生成类型。

#### 思考

- 新命令:
    - `spawnXY`
- 新可生成类型:
    - `"fence"`

### 关卡2：单击步法

**讨论问题\#2a：“机制”是什么意思？**

  - 机制定义了玩家如何与游戏互动，以及游戏如何对玩家动作作出反应。

**讨论问题\#2b：你最喜爱的游戏中有哪些机制？**

  - 一些例子：
      - 点X跳起
      - 点鼠标左键射击
      - 敌人在看到玩家时会发起攻击
  - 游戏开发1中，学生将不会创建新的机制。新机制创建将是计算机科学2和游戏开发2的内容！
  - CodeCombat提供了一些学生可以在游戏中配置的基本机制。

#### 关卡游玩

本关引入了第一个基本的游戏**机制**：

**机制\#1：**点击鼠标移动玩家角色**。**

  - 本关中，学生将无需编写任何代码，点击“测试”即可游玩关卡。这里有必要指出`spawnPlayerXY`命令。
  - `player` （玩家角色对象）是玩家控制的特殊游戏元素。
  - 生成`player`使用`game.spawnPlayerXY(type, x, y)`：
      - `type` 是表示生成`player`类型的名称*字符串*
      - `x`和`y`是表示地图上位置坐标的数字
  - **常见错误：**学生有时会用`game.spawnXY` 生成player，但这样生成的`player`将不可控！一定要用`game.spawnPlayerXY`！该命令会额外将运动机制添加给`player`元素。
  - 本关还展示了`addMoveGoal(x, y)`，相关的更详细内容将放到下一关。

#### 思考

  - 新机制：
      - 点击移动
  - 新命令：
      - `spawnPlayerXY`
  - 新可生成元素：
      - `"knight"`（骑士）

### 关卡3：英雄旅程

**讨论问题\#3a：“目标”是什么意思？**

  - 玩家赢得游戏或取得进展所需完成的特定任务。

**讨论问题\#3b：你最喜爱的游戏中有哪些目标？**

  - 一些典型例子：
      - 在到时间之前收集尽可能多的金币
      - 打败敌人
      - 夺取旗帜并带它返回基地
      - 将球投入圈中
  - 在CodeCombat中设计游戏时，我们提供了一些你可以使用的基础目标。在更进阶的课程中，学生们将会创建自定义目标！

#### 关卡游玩

本关聚焦于第一个基础**目标**：移动。

**目标\#1：移动到红X位置**

  - 使用`game.addMoveGoalXY(x, y)`添加一个移动目标
  - `x`和`y`是表示地图上位置坐标的数字
  - 移动目标用地图上的红X标记表示。`player`对象移动到红X后，红X将会消失。
  - 游戏开发1未来的关卡中将会有更多目标类型。

#### 思考

  - 新命令：
      - `addMoveGoalXY`
  - 新可生成对象：
      - `"captain"`（队长）

### 关卡4：太赞了

**讨论：**

本关引入了一类新**目标**：收集。

**目标\#2：收集所有宝石和宝箱。**

  - 用`game.addCollectGoal()`命令添加一个收集目标。
  - 两种新可生成元素：`"forest"`和`"chest"`。
  - `"forest"`元素可以被用来创建迷宫和障碍物。
  - `"chest"`是可收集的元素。

#### 思考

  - 新目标：
      - `addCollectGoal`
  - 新可生成元素：
      - `"forest"`
      - `"chest"`

### 关卡5: "壮丽宝石"

#### 讨论：

**在游戏可玩之前，你需要做些什么？**

  - 生成一个玩家角色
  - 添加一个目标

使用`addCollectGoal` 命令创建一个收集宝石的简单游戏目标。

#### 思考

  - 新可生成元素:
      - `"gem"`（宝石）

### 关卡6: "致命鼠标"

#### 讨论

本关引入了三个新机制：

**机制\#2: 点击敌人来进行攻击！**

**机制\#3: 敌人在看到玩家时会发起攻击。**

**机制\#4:
        > 一些元素会挡住“视线”。**

本关还使用了两个新目标类型，相关内容将留到下一关讲。

#### 关卡游玩

  - 打败食人魔矮人。
  - 本关中，学生无需编写任何代码，但是需要查看样码。注意到代码中有：
      - 新可生成元素类型： `"munchkin"`（食人魔矮人） 和 `"guardian"`（守卫）
      - 食人魔矮人是敌人！
          - 敌人是玩家可以攻击的游戏元素。
          - 游戏开发1中，敌人来袭的机制很简单，看到玩家他们就会发起攻击。
          - 地图底部有两个食人魔矮人，他们一开始看不到玩家角色。
      - 我们使用spawnXY 来创建`"forest"`迷宫元素。`"forest"`元素会挡住`"munchkin"`和`"guardian"`之间的视线。

#### 思考

  - 新机制：
      - 点击鼠标进行攻击
      - 看到玩家时敌人发起攻击
      - 视线
  - 新可生成元素：
      - `"munchkin"`
      - `"guardian"`

## 第二天

### 回顾

  - 上次我们学习了：
      - 使用spawnXY生成游戏元素
      - 使用spawnPlayerXY生成玩家角色
      - 通过点击地图来移动玩家角色
      - 使用addMoveGoalXY 和addCollectGoal来添加游戏目标

### 关卡7: "碾碎它"

#### 讨论

本关卡聚焦于两个新目标类型：

**目标\#3: 打败敌人**

**目标\#4: 存活到其他目标均完成**

目标\#4和其他目标有所不同。移动、收集和击败目标都是玩家做的动作。生存目标恰好相反，如果玩家被击败游戏就会失败。

#### 关卡游玩

  - 使用game.addDefeatGoal()命令添加一个击败目标。
  - 使用game.addSurviveGoal()命令添加一个生存目标。
  - 在样码生成的敌人之外，再生成至少3个食人魔矮人`"munchkin"`（总数最少4个）

#### 思考

  - 新命令：
      - addDefeatGoal
      - addSurviveGoal

### 关卡8: "取舍"

#### 讨论

本关卡添加了新可生成元素及相关新机制。

  - `"fire-trap"` （火焰陷阱）会在玩家离得太近时给玩家造成伤害！
  - `"potion-small"` （小药剂）在玩家角色移动到其上时治愈玩家150点生命值。
  - 引入 `"samurai"` （武士）游戏元素。
  - 学生需要至少生成两瓶 `"potion-small"` 来完成关卡。
  - 移动到`"fire-trap"`会引爆陷阱，玩家角色必须使用药剂来回复生命值，然后回到红叉处。
  - 记住，如果红X还在地图上，那就说明你还没完成移动目标！

#### 思考

  - 新可生成元素：
      - `"samurai"`
      - `"fire-trap"`
      - `"potion-small"`

### 关卡9: "军事训练"

#### 讨论

本关卡添加新可生成单位：

  - `"thrower"`（食人魔投矛手）是远程投矛攻击的敌人
  - `"soldier"`（士兵）是玩家的盟友，使用近战攻击
  - `"archer"`（弓箭手）是远程攻击的盟友

#### 思考

  - 新可生成元素：
      - `"thrower"`
      - `"soldier"`
      - `"archer"`

### 关卡10: "漫游者危险"

#### 讨论

制作你自己的游戏时，在盟友和敌人之前找到正确的平衡，是需要不断尝试的。

  - 远程单位攻击力更大，但生命值较少
  - 士兵比食人魔矮人更强壮，但动作较慢
  - 以后，学生将能够修改玩家角色和单位的属性值

#### 关卡游玩

  - 本关卡没有玩家角色player
  - 关卡代码中一开始有太多士兵，而弓箭手不足，无法打败巨大的食人魔斗士
  - 学生需要将两个士兵换成弓箭手，然后点“测试关卡”按钮，看战斗如何打响
  - 本关中，部分盟友被打败是没关系的，只要击败食人魔就行

#### 思考

  - 要找到正确的**游戏平衡**，是需要不断尝试的。

### 关卡11: "障碍魔法"

#### 讨论

本关卡引入 `"duelist"` （决斗者）玩家角色类型及game.spawnMaze(seed)迷宫生成命令。
  - 使用"forest"元素建造一整个迷宫需要很多时间，因此我们提供了一个随机生成迷宫的命令。
  - 种子参数seed可以是任何数字。叫种子是因为它会初始化用于创建迷宫的随机性。改变种子，生成的迷宫就会变化。
  - 为spawnMaze命令提供不同数字作为参数，直到找到你最喜欢的迷宫！例如：
      - game.spawnMaze(42)
      - game.spawnMaze(1337)

#### 思考

  - 新命令：
      - `spawnMaze(seed)`

### 关卡12: 森林入侵

#### 讨论

游戏对象拥有**属性**。属性就像是专属于特定对象的变量。本关卡还引入了`goliath`（歌利亚）玩家角色类型。

本关卡中，我们会学到单位的三个属性：

  - maxSpeed 是表示单位最大移动速度的数值
  - maxHealth 是表示单位初始生命值的数值
  - attackDamage 是表示单位一次攻击的伤害值

更改玩家角色或其他单位的属性会显著影响游戏平衡。

属性一般是用点符号.来访问，点放到对象和属性之间，例如：object.propertyName

注意到，所有游戏命令都是game对象的属性，这些命令都是通过相同的点符号访问的！

#### 关卡游玩

  - 注意到，样码将spawnPlayerXY 命令的结果保存到了player 变量中
  - 这样一来，学生就可以使用player 变量来修改玩家角色的属性，例如，`player.maxSpeed = 25`会将`player` 对象的`maxSpeed` 属性设为`25` 
  - 更改单位属性是学生在游戏开发关卡中的超级特权。在计算机科学课程关卡中，单位属性是不能直接修改的

#### 思考

  - 新可生成元素
      - `"goliath"`
  - 新单位属性
      - maxSpeed
      - maxHealth
      - attackDamage

### 关卡13: 投火

#### 讨论

游戏开发1关卡中，有些对象的机制可以通过修改属性值来配置。

  - 本关卡引入可生成元素 `"fire-spewer"` （喷火器）
  - 学生可以使用fire-spewer的方向属性direction 来决定，喷火是向上下方向vertical还是左右方向horizontal。
  - 游戏开发2中，学生将学会为游戏对象设置自定义机制，不过在这之前，学生需要先修完计算机科学2。现在，为了让事情更简单，我们只提供一些可微调的机制。

#### 关卡游玩

  - 注意spawnXY 命令的结果被赋值给了一个变量，这样生成对象的属性就可以在以后的代码中通过这个变量来访问了。
  - direction 属性只能设置为字符串，`"horizontal"` 或 `"vertical"`二选一。

#### 思考

  - 新可设置游戏对象
      - `"fire-spewer"`
          - direction 属性

### 关卡14: 他们骨头

#### 讨论

本关卡引入可生成元素`"generator"`（生成器）、`"skeleton"`（骷髅怪）和 `"lightstone"`（发光石），以及 `"champion"`（冠军战士） 玩家角色。

  - `"generator"` 会每5秒生成一个 `"skeleton"` 
  - 单位是有阵营的，人类单位将食人魔单位看作敌人，食人魔单位也将人类单位看作敌人。
  - `"skeleton"`则是中立的，他们会无差别攻击食人魔和人类！
  - `"skeleton"`害怕`"lightstone"`。玩家带着发光石时，骷髅怪就不敢靠近！
  - `"generator"`可以用于生成不同类型的单位，后面的关卡中我们会看到。

#### 关卡游玩

  - 生成器会持续生成骷髅怪，直到被摧毁
  - 使用发光石驱散骷髅怪，为摧毁生成器争取时间
  - 发光石不会一直发光，善加利用吧

#### 思考

  - 新可生成元素：
      - `"generator"`
      - `"skeleton"`
      - `"lightstone"`
      - `"champion"`

## 第3天

### 回顾

我们创建游戏时，目标有哪些类型？

  - 移动
  - 收集
  - 击败
  - 生还

可生成元素现在有哪些类型？

  - 障碍物:
      - `"fence"`
      - `"forest"`

  - 收集物品:
      - `"gem"`
      - `"chest"`

  - 敌人:
      - `"munchkin"`
      - `"thrower"`
      - `"skeleton"`

  - 玩家角色:
      - `"knight"`
      - `"captain"`
      - `"guardian"`
      - `"samurai"`
      - `"duelist"`
      - `"goliath"`
      - `"champion"`

  - 盟友:
      - `"soldier"`
      - `"archer"`

  - 其他:
      - `"fire-trap"`
      - `"potion-small"`
      - `"fire-spewer"`
      - `"generator"`
      - `"lightstone"`

学生可以看到这些可生成对象的属性，做法是点击游戏窗口中间窗格的Spawnable部分。

### 关卡15: 基于行为的开发

#### 讨论

本关卡引入 可生成元素`"ogre"` （食人魔），以及单位属性 behavior（行为）。学生可以通过行为属性修改单位的运行机制，让其行为发生变化。

  - 所有单位（无论盟友还是敌人）都可以使用behavior 属性来修改**机制**。
  - behavior 属性只能赋值为**字符串**，其值在下面这些里面选择：
      - `"AttacksNearest"` 让单位攻击最近的敌人
      - `"Scampers"` 让单位随机移动
      - `"Defends"` 让单位原地待命并攻击进入攻击范围的敌人

  - 游戏开发2中，学生将学会以更复杂的方式自定义单位的行为。

#### 关卡游玩

  - 通过本关卡要比大多数关卡更复杂，就像真正的游戏一样！
  - 一种策略是使用发光石，让骷髅怪远离食人魔，将食人魔相互引开，然后引到弓箭手盟友的射程内，让其帮你打败食人魔。这需要玩家角色谨慎采取行动才能实现。
  - 生命值较低时记得喝药水！
  - 尝试几次如果没通过，不要灰心！
  - 如果真的卡住，你可以尝试给玩家角色更大攻击值attackDamage ，让游戏变得简单。

#### 思考

  - 新可生成元素:
      - `"ogre"`
  - 新单位属性:
      - behavior

### 关卡16: 生存时间

#### 讨论

本关卡引入一个设置生存时间目标的参数，以及生成矮人munchkin的生成器。

  - 之前，学生使用addSurviveGoal() 时没带任何参数（括号中间没有任何内容），这意味着玩家角色必须存活到其他所有目标达成。
  - 现在，学生可以使用addSurviveGoal(seconds)来设置玩家实现目标需要存活的秒数。
  - 秒数参数 seconds 必须是数字，例如 addSurviveGoal(20)，存活目标 20 秒。
  - `"generator"`有一个生成类型属性 spawnType，可以设为任何可生成单位对应的字符串。

#### 关卡游玩

  - 确定照样码注释中指示的那样设置生成器，否则目标将无法达成。

#### 思考

  - 新目标设置:
      - addSurviveGoal(seconds)
  - 新生成器设置:
      - spawnType

### 关卡17: "一张白纸"

#### 最终项目\!

本关卡将从一张白纸开始。要通过本关，只需要生成玩家角色并添加目标。说起来容易，但这只是开始。鼓励学生创造性使用本课程中学到的所有技能！

代码编辑窗口上方有一个新的“游戏”按钮。点它会加载学生游戏的可分享版本并提供游戏链接。学生可以将链接分享给朋友。

每个学生都需要设计一个游戏，将游戏元素、目标和机制结合起来，创造性地使用课程中学到的知识。

每个游戏至少需要：

1.  生成一个玩家角色

2.  为玩家添加一个或多个需要完成的目标

3.  使用障碍物、敌人、可收集物品等元素，融合起来为玩家创建一个有趣的挑战

除此之外，学生还可以使用db.add命令追踪有多少人玩过他们的游戏。他们还可以使用game.defeated属性跟踪玩家总共打败了多少敌人！游戏开发2课程中，学生将学会如何对游戏中发生的事件作出反应，以及如何使用数据库跟踪更多有趣的游戏数据。

学生在创建游戏时需要经过如下步骤：

1.  **设计。**这可以在纸上完成，描述理念、绘制蓝图、列出目标。

2.  **创建。**将初始设计实现到游戏引擎中（这里是将设计实现到“一张白纸”关卡来创建游戏）。

3.  **测试。**创建游戏时，学生需要一直进行测试，一直自己试玩游戏，确保游戏能和设想的一样。

4.  **反馈。**学生需要将游戏链接和朋友分享，并获取他们在过程中享受的乐趣或是受到的挫折。

5.  **改进。**学生需要基于反馈，回头继续编程，改善游戏！

在第3天的剩余时间里，集中精力进行1、2、3步。

## 第4天

#### 完成最终项目

第4天的前半部分，让学生与一个朋友组队。每个学生都需要使用“游戏”按钮来获得分享链接，并将链接提供给自己的队友。

每一对中，一个学生先玩另一个的游戏，游戏编写者在一旁观看。让观看的人思考如下问题：

  - 你队友玩游戏的方式是否和你设想的一样？有没有什么出乎意料的？
  - 队友玩得开心吗？还是很受挫？
  - 游戏运行是不是和你设想的一样？

然后让玩家讲出对游戏的想法，游戏编写者需要记录下这些反馈信息。

下一步，交换角色重复上述过程，为队里另一位学生的游戏进行测试和反馈。

完成上述步骤之后，学生回头单独改善自己的游戏，看看基于观测让游戏更优。

如果有时间，还可以让学生再和另一个同学配对，看结果有没有不同。

## 第5天

#### 大秀场

这将是游戏开发1一周课程圆满完成的日子。

每个学生都要花几分钟时间给全班展示自己的游戏。鼓励每个学生讲讲下面这些：

  - 你对游戏的最初想法是怎样的？
  - 创建游戏的过程中，最初的想法有没有什么变化？
  - 测试你游戏的队友在玩你的游戏时，有没有什么让你意外的？
  - 在观看队友玩你的游戏后，你是否对游戏做了改善？

鼓励学生将最终项目的链接和亲朋好友分享！

我们由衷希望你能得到最优的项目！欢迎把链接发送给下列邮箱：  
 [<span class="underline">team@codecombat.com</span>](mailto:team@codecombat.com)

或是给我们发推特[<span class="underline">@CodeCombat</span>](https://twitter.com/CodeCombat)，这会更好。
